installation la plus simple d'un conteneur nginx qui affiche une page web.

# On check les processus utilisant le port 8080
sudo lsof -i :8080

# On les supprime
sudo kill <PID>

# On stop et supprime tous les processus docker puis on redemarre docker
docker stop $(docker ps -aq)
docker system prune -af
systemctl restart docker

# Run le docker
docker run -d -p 8080:80 nginx

---------------------------------------------------------

edesaint@edesaint-VirtualBox:~/Desktop/nginx$ docker ps
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
edesaint@edesaint-VirtualBox:~/Desktop/nginx$ docker run -d -p 8080:80 nginx
48d1a406c8192fed34fb9851c8a5fb4ae4bc9d6fdec7edd07e7e9c74163b50e2
docker: Error response from daemon: failed to create task for container: failed to create shim task: OCI runtime create failed: runc create failed: unable to start container process: exec: "/usr/local/nginx/sbin/nginx": stat /usr/local/nginx/sbin/nginx: no such file or directory: unknown., FROM debian:bullseye

RUN apt-get update -y && apt-get upgrade -y && apt-get install -y \
    build-essential \
    libpcre3 \
    libpcre3-dev \
    zlib1g \
    zlib1g-dev \
    libssl-dev \
    nginx \
    openssl \
    wget \
    curl

RUN mkdir -p /etc/nginx/ssl
RUN mkdir -p /var/run/nginx

EXPOSE 80

COPY conf/nginx.conf /etc/nginx/nginx.conf
COPY index.html /usr/local/nginx/html/

RUN openssl req -x509 -nodes -out /etc/nginx/ssl/inception.crt -keyout /etc/nginx/ssl/inception.key -subj "/C=FR/ST=IDF/L=Paris/O=42/OU=42/CN=edesaint@student.42.fr/UID=edesaint"
RUN chmod 755 /var/www
RUN chown -R www-data:www-data /var/www/html

# CMD [ "nginx", "-g", "daemon off;" ]
CMD ["/usr/local/nginx/sbin/nginx", "-g", "daemon off;"] et 
worker_processes auto;
events{
    worker_connections 1024;
}

http{
    server {
        listen 80;
        root /var/www/html;
        index index.html
    }
}
